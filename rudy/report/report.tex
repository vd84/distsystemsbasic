% Very simple template for lab reports. Most common packages are already included.
\documentclass[a4paper, 11pt]{article}
\usepackage[utf8]{inputenc} % Change according your file encoding
\usepackage{graphicx}
\usepackage{url}

%opening
\title{Report 2: Rudy homework report}
\author{Douglas Hammarstam}
\date{\today{}}

\begin{document}

\maketitle

\section{Introduction}

\textit{In this project, a simple web server has been implemented.}

In this seminar, the main topic covered was the HTTP-protocol and how to parse it using Erlang.
Furthermore, the seminar covered how to use the gen\_tcp
package in order to receive network HTTP-requests and handle the requests by
using above mentioned parsing of the HTTP request.  

This is important in order to get an understanding of how to use Erlang in order 
to efficiently parse HTTP-requests (strings)
using recursion.

It is also important in order to understand basic Erlang features like recursion,
pattern-matching aswell as spawning processes in order to distribute an application on multiple threads.

\section{Main problems and solutions}


In order to build a small web server i Erlang we use the gen\_tcp package which 
has an API for listening to incoming HTTP-requests on a given port.

\begin{verbatim}
  gen-tcp:listen(Port, Opt)
\end{verbatim}

The package also provides the possibility to accept incoming TCP\-connections.

\begin{verbatim}
  gen_tcp:accept(Listen)
\end{verbatim}

Where "Listen" is port to listen on.

After that, we can handle each request by spawning a new process for each request. This makes the program more responsive to many requests at the same time, since we are able to handle requests concurrently.


\begin{verbatim}
spawn(fun() -> request(Client) end),
\end{verbatim}

In order to handle these requests. We need to do some parsing of the http-request.

The first problem in the assignment was to parse the incoming HTTP-request. This was done by dividing the problem into different sections;
Firstly, parsing the method used in the request (GET). Then the URL is received by parsing each character after the space (32) character after the GET string until we reach another space character (32).
Secondly, we get the HTTP-version (v10 or v11) by simply pattern matching the string to either of those values.
Thirdly, we parse a line-break character followed by the headers, which we also recursively parse.
Fourthly we parse the body where we assume that the rest of the request is made up of the body, which is not always the case in a real world scenario.

\section{Evaluation}

\textit{If needed, you may provide figures or tables with main results
  evaluating your proposals. For each seminar, we will provide you
  with some guidance on which kind of evaluation you should do.}

And Figures \ref{fig:results1} and \ref{fig:results2 } shows how to
add a figure with some results. These figures have been created with
gnuplot. There are tons of different kinds of plots that can be
generated with gnuplot. Make sure to check out
\url{http://gnuplot.info/demo/} and look at them so you can see what
can you do with this program.


\begin{figure}
  \begin{center}
    \includegraphics{results1.pdf}
    \caption{Some random results 1}
    \label{fig:results1}
  \end{center}
\end{figure}


\begin{figure}
  \begin{center}
    \includegraphics{results2.pdf}
    \caption{Some random results 2}
    \label{fig:results2}
  \end{center}
\end{figure}

To obtain these figures you have to:
\begin{enumerate}

\item Create the data file from the experiments (look at file
  experiment.dat)

\item Create a gnuplot file to create a figure in eps format (look at
  files results1.plot and results2.plot). These files may be very
  complex. But for the results we want to show, these examples are
  enough. To create the eps figures, execute in terminal:

\begin{verbatim}
$> gnuplot results1.plot 
\end{verbatim}

\item As pdflatex does not recognize eps files, you must convert them
  to pdf files. This is done by (it will generate a file
  results1.pdf):

\begin{verbatim}
$> epstopdf results1.eps
\end{verbatim}

\item That's it! Just include the figure as shown in this template and
  compile the latex as explained in the document ``Introduction to
  \LaTeXe''.

\end{enumerate}


If you want, you can also create a table of results as Table
\ref{tab:results}. If you look at the template code, you will see how
to do a table in \LaTeX.

\begin{table}[h]
\centering
\begin{tabular}{lcc}
First column & Second column & Third column\\\hline
Case 1 & 1.1 & 1.2\\\hline
Case 2 & 2.1 & 2.2\\\hline
Case 3 & 3.1 & 3.2\\\hline
\end{tabular}
\caption{Some random results in a table}
\label{tab:results}
\end{table}

\section{Conclusions}


What have you learnt from the problem presented?
Was it useful?


\end{document}
